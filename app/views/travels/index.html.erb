<%= render 'layouts/finder' %>
<div class= "container">
    <div class= "row mt">
        <div class= "col-md-3">
            <%= render 'layouts/userinfo', user: current_user %>

            <%= render 'travels/newform', travel: @travel %>
        </div>

        <div class= "col-md-8 offset-md-1">
            <h2 class= "mb-3">Travels</h2>
            <table class= "table table-hover">
                <thead>
                    <tr>
                        <th></th>
                        <th>Title</th>
                        <th>Opinion</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <% @travels.each do |travel| %>
                        <tr>
                            <td class= "">
                                <%= link_to user_path(travel.user) do %>
                                    <%= attachment_image_tag travel.user, :profile_image, size: '50x50', fallback: "no-img.jpg", class: "img"  %>
                                <% end %>
                            </td>
                            <td><%= link_to travel.title, travel_path(travel) %></td>
                            <td><%= travel.body %></td>
                            <td>
                                <% if travel.favorited_by?(current_user) %>
                                    <%= link_to travel_favorites_path(travel), method: :delete, remote: true do %>
                                        <i class="fas fa-heart unlike-btn"></i>
                                        <%= travel.favorites.count %>
                                    <% end %>
                                <% else %>
                                    <%= link_to travel_favorites_path(travel), method: :post, remote: true do %>
                                        <i class="far fa-heart like-btn"></i>
                                        <%= travel.favorites.count %>
                                    <% end %>
                                <% end %>
                            </td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    </div>
</div>
